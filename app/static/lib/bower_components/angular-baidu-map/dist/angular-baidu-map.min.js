!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("angular"));else if("function"==typeof define&&define.amd)define(["angular"],t);else{var n=t("object"==typeof exports?require("angular"):e.angular);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}("undefined"!=typeof self?self:this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function o(e,t){if(r(e))throw new Error(t)}function r(e){return null===e||void 0===e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){if(u.indexOf((e||"").toLowerCase())<0)throw new Error("control type should be one of: ["+u.join(",")+"]")}function c(e){if(l.indexOf((e||"").toLowerCase())<0)throw new Error("overlay type should be one of: ["+l.join(",")+"]")}t.d=o,t.c=r,t.b=i,t.a=a,t.e=c;var u=["navigation","overviewmap","scale","maptype","copyright","geolocation","panorama"],l=["heatmap"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ngBaiduMap",function(){return p});var o=n(2),r=n.n(o),i=n(3),a=n(6),c=n(8),u=n(9),l=n(12),s=n(13);Object(s.a)();r.a.module("baiduMap",[]).provider("mapScriptService",l.a).component("baiduMap",i.a).component("marker",a.a).component("control",c.a).component("overlay",u.a);var p="baiduMap"},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return new Promise(function(n){e[t].apply(e,o),n()})}var i=n(4),a=n(5),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.a={bindings:{offlineTxt:"<",mapOptions:"<",loaded:"&",click:"&"},transclude:!0,template:'\n        <div ng-style="$ctrl.style.map" class="baidu-map-instance"></div>\n        <div ng-style="$ctrl.style.offline" class="baidu-map-offline">\n            <label ng-style="$ctrl.style.offlineLabel">{{ $ctrl.offlineTxt || \'NO_NETWORK\' }}</label>\n        </div>\n        <div ng-transclude style="display: none"></div>\n    ',controller:function(){function e(t,n,r,a){o(this,e),this.$scope=t,this.$element=n,this.$attrs=r,this.style=i,this.mapScriptService=a}return e.$inject=["$scope","$element","$attrs","mapScriptService"],c(e,[{key:"$onInit",value:function(){var e=this;this.mapReady=this.mapScriptService.load().then(function(){return Object(a.a)(e.$element.children()[0],e.mapOptions)}).then(function(t){return e.loaded({map:t}),e.$scope.$apply(),e.map=t}).then(function(){if(e.$attrs.click){var t=e.clickListener=function(t){e.click({e:t}),e.$scope.$apply()};e.map.addEventListener("click",t)}})}},{key:"$onChanges",value:function(e){this.map&&Object(a.b)(this.map,e.mapOptions.currentValue)}},{key:"$onDestroy",value:function(){this.map.removeEventListener("click",this.clickListener)}},{key:"addOverlay",value:function(e){return r(this.map,"addOverlay",e)}},{key:"removeOverlay",value:function(e){return r(this.map,"removeOverlay",e)}},{key:"addControl",value:function(e){return r(this.map,"addControl",e)}},{key:"removeControl",value:function(e){return r(this.map,"removeControl",e)}},{key:"getMap",value:function(){return this.map}}]),e}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"map",function(){return o}),n.d(t,"offline",function(){return r}),n.d(t,"offlineLabel",function(){return i});var o={width:"100%",height:"100%",display:"none"},r={width:"100%",height:"100%",backgroundColor:"#E6E6E6",position:"relative",display:"none"},i={fontSize:"30px",margin:0,position:"absolute",top:"50%",left:"50%","margin-right":"-50%",transform:"translate(-50%, -50%)"}},function(e,t,n){"use strict";function o(e,t){var n=new BMap.Map(e,t);return r(n,t),n}function r(e,t){Object(i.c)(t)||Object(i.c)(t.disableDragging)||e[(t.disableDragging?"disable":"enable")+"Dragging"](),Object(i.c)(t)||Object(i.c)(t.enableScrollWheelZoom)||e[(t.enableScrollWheelZoom?"enable":"disable")+"ScrollWheelZoom"](),Object(i.c)(t)||Object(i.c)(t.disableDoubleClickZoom)||e[(t.disableDoubleClickZoom?"disable":"enable")+"DoubleClickZoom"](),Object(i.c)(t)||Object(i.c)(t.enableKeyboard)||e[(t.enableKeyboard?"enable":"disable")+"Keyboard"](),Object(i.c)(t)||Object(i.c)(t.enableInertialDragging)||e[(t.enableInertialDragging?"enable":"disable")+"InertialDragging"](),Object(i.c)(t)||Object(i.c)(t.enableContinuousZoom)||e[(t.enableContinuousZoom?"enable":"disable")+"ContinuousZoom"](),Object(i.c)(t)||Object(i.c)(t.disablePinchToZoom)||e[(t.disablePinchToZoom?"disable":"enable")+"PinchToZoom"](),!Object(i.c)(t)&&!Object(i.c)(t.cursor)&&e.setDefaultCursor(t.cursor),!Object(i.c)(t)&&!Object(i.c)(t.draggingCursor)&&e.setDraggingCursor(t.draggingCursor),!Object(i.c)(t)&&!Object(i.c)(t.currentCity)&&e.setCurrentCity(t.currentCity),!Object(i.c)(t)&&!Object(i.c)(t.centerAndZoom)&&e.centerAndZoom(new BMap.Point(t.centerAndZoom.longitude||a.longitude,t.centerAndZoom.latitude||a.latitude),t.centerAndZoom.zoom||c)}t.a=o,t.b=r;var i=n(0),a={longitude:121.506191,latitude:31.245554},c=10},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=JSON.parse(JSON.stringify(e||{}));return t.offset&&(t.offset=Object(a.c)(t.offset,"<marker> options.offset")),t.icon&&(t.icon=Object(a.a)(t.icon,"<marker> options.icon")),t.shadow&&(t.shadow=Object(a.a)(t.shadow,"<marker> options.shadow")),t}var i=n(0),a=n(7),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.a={bindings:{point:"<",options:"<",click:"&"},require:{mapCtrl:"^baiduMap"},template:"",controller:function(){function e(t,n){o(this,e),this.$scope=t,this.$attrs=n}return e.$inject=["$scope","$attrs"],c(e,[{key:"$onInit",value:function(){var e=this;Object(i.d)(this.point,"point is required for <marker>"),this.mapCtrl.mapReady.then(function(){var t=Object(a.b)(e.point,"<marker> point"),n=r(e.options),o=e.marker=new BMap.Marker(t,n);return e.mapCtrl.addOverlay(o),o}).then(function(t){e.$attrs.click&&(e.clickHandler=function(n){e.click({e:n,marker:t,map:e.mapCtrl.getMap()}),e.$scope.$apply()},t.addEventListener("click",e.clickHandler))})}},{key:"$onChanges",value:function(e){this.marker&&e.point&&e.point.currentValue&&this.marker.setPosition(Object(a.b)(e.point.currentValue,"<marker> point"))}},{key:"$onDestroy",value:function(){this.marker.removeEventListener("click",this.clickHandler),this.mapCtrl.removeOverlay(this.marker)}}]),e}()}},function(e,t,n){"use strict";function o(e,t){var n={url:e.url};return Object(a.d)(e.url,"url is required in "+t),Object(a.d)(e.size,"size is required in "+t),n.size=r(e.size,t+".size"),new BMap.Icon(n.url,n.size)}function r(e,t){return Object(a.d)(e.width,"width is required in "+t),Object(a.d)(e.height,"height is required in "+t),new BMap.Size(e.width,e.height)}function i(e,t){return Object(a.d)(e.longitude,"longitude is required in "+t),Object(a.d)(e.latitude,"latitude is required in "+t),new BMap.Point(e.longitude,e.latitude)}t.a=o,t.c=r,t.b=i;var a=n(0)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("navigation"===e)return new BMap.NavigationControl(t);if("overviewmap"===e)return new BMap.OverviewMapControl(t);if("scale"===e)return new BMap.ScaleControl(t);if("maptype"===e)return new BMap.MapTypeControl(t);if("copyright"===e){var n=new BMap.CopyrightControl(t);return Object(i.b)(t.copyrights)&&t.copyrights.forEach(function(e){n.addCopyright(e)}),n}return"geolocation"===e?new BMap.GeolocationControl(t):"panorama"===e?new BMap.PanoramaControl(t):void 0}var i=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.a={bindings:{type:"@",options:"<"},require:{mapCtrl:"^baiduMap"},template:"",controller:function(){function e(){o(this,e)}return a(e,[{key:"$onInit",value:function(){var e=this;Object(i.a)(this.type),this.mapCtrl.mapReady.then(function(){return r(e.type.toLowerCase(),e.options)}).then(function(t){return e.mapCtrl.addControl(t),e.control=t,t})}},{key:"$onDestroy",value:function(){this.mapCtrl.removeControl(this.control)}}]),e}()}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("heatmap"===e)return Object(c.a)(t)}function i(e,t,n){"heatmap"===e&&n&&t.setDataSet(n)}var a=n(0),c=n(10),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.a={bindings:{type:"@",options:"<",dataset:"<"},require:{mapCtrl:"^baiduMap"},template:"",controller:function(){function e(){o(this,e)}return u(e,[{key:"$onInit",value:function(){var e=this;Object(a.e)(this.type),this.realType=this.type.toLowerCase(),this.mapCtrl.mapReady.then(function(){return r(e.realType,e.options)}).then(function(t){return e.mapCtrl.addOverlay(t),e.overlay=t,i(e.realType,e.overlay,e.dataset),t})}},{key:"$onChanges",value:function(e){e.dataset&&e.dataset.currentValue&&i(this.realType,this.overlay,e.dataset.currentValue)}},{key:"$onDestroy",value:function(){this.mapCtrl.removeOverlay(this.overlay)}}]),e}()}},function(e,t,n){"use strict";function o(e){return Object(r.a)().then(function(){return new BMapLib.HeatmapOverlay(e)})}t.a=o;var r=n(11)},function(e,t,n){"use strict";function o(e){return new Promise(function(t,n){var r=document.createElement("script");r.type="text/javascript",r.src=e,r.onerror=function(){document.body.removeChild(r),setTimeout(function(){o(e)},3e4)},r.onload=t,document.body.appendChild(r)})}t.a=function(){var e=window.loadHeatMapPromise;return e||(window.loadHeatMapPromise=o("//api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"))}},function(e,t,n){"use strict";function o(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.onerror=function(){Array.prototype.slice.call(document.querySelectorAll("baidu-map .baidu-map-offline")).forEach(function(e){e.style.display="block"}),document.body.removeChild(t),setTimeout(function(){o(e)},3e4)},document.body.appendChild(t)}function r(){return Array.prototype.slice.call(document.querySelectorAll("baidu-map")).forEach(function(e){e.querySelector(".baidu-map-offline")&&e.removeChild(e.querySelector(".baidu-map-offline")),e.querySelector(".baidu-map-instance").style.display="block"})}var i=n(0);t.a=function(){var e=null,t=void 0;this.setKey=function(n){e=n,t="//api.map.baidu.com/api?v=2.0&ak="+e+"&callback=baidumapinit",t=location.protocol.indexOf("http")>-1?t+"&s="+("https:"===location.protocol?1:0):"https:"+t+"&s=1"},this.$get=["$rootScope",function(n){"ngInject";return{load:function(){Object(i.d)(e,"ak should be set before use. Read: https://leftstick.github.io/BaiduMapForAngularJS/#!/quickstart");var a=n.loadBaiduMapPromise;return a?a.then(r):n.loadBaiduMapPromise=new Promise(function(e,n){window.baidumapinit=e,o(t)}).then(r)}}}]}},function(e,t,n){"use strict";function o(){window.BMAP_ANCHOR_TOP_LEFT=0,window.BMAP_ANCHOR_TOP_RIGHT=1,window.BMAP_ANCHOR_BOTTOM_LEFT=2,window.BMAP_ANCHOR_BOTTOM_RIGHT=3,window.BMAP_NAVIGATION_CONTROL_LARGE=0,window.BMAP_NAVIGATION_CONTROL_SMALL=1,window.BMAP_NAVIGATION_CONTROL_PAN=2,window.BMAP_NAVIGATION_CONTROL_ZOOM=3,window.BMAP_UNIT_METRIC="metric",window.BMAP_UNIT_IMPERIAL="us",window.BMAP_MAPTYPE_CONTROL_HORIZONTAL=0,window.BMAP_MAPTYPE_CONTROL_DROPDOWN=1,window.BMAP_MAPTYPE_CONTROL_MAP=2,window.BMAP_ANIMATION_DROP=1,window.BMAP_ANIMATION_BOUNCE=2,window.BMAP_POINT_SIZE_TINY=1,window.BMAP_POINT_SIZE_SMALLER=2,window.BMAP_POINT_SIZE_SMALL=3,window.BMAP_POINT_SIZE_NORMAL=4,window.BMAP_POINT_SIZE_BIG=5,window.BMAP_POINT_SIZE_BIGGER=6,window.BMAP_POINT_SIZE_HUGE=7,window.BMAP_PANORAMA_INDOOR_SCENE="inter",window.BMAP_PANORAMA_STREET_SCENE="street",window.BMAP_PANORAMA_POI_HOTEL="hotel",window.BMAP_PANORAMA_POI_CATERING="catering",window.BMAP_PANORAMA_POI_MOVIE="movie",window.BMAP_PANORAMA_POI_TRANSIT="transit",window.BMAP_PANORAMA_POI_INDOOR_SCENE="indoor_scene",window.BMAP_PANORAMA_POI_NONE="none"}t.a=o}])});